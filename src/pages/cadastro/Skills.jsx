import React, { useEffect, useState } from "react";
import "../../css/skills.css";
import { Link } from "react-router-dom";

export default function Skills() {
  const [hardSkills, setHardSkills] = useState([]);
  const [softSkills, setSoftSkills] = useState([]);

  const [hardInput, setHardInput] = useState("");
  const [softInput, setSoftInput] = useState("");

  // Dados do usuário
  const [nome, setNome] = useState("");
  const [cargo, setCargo] = useState("");
  const [perfil, setPerfil] = useState("");

  useEffect(() => {
    document.body.classList.add("skills-body");

    // Busca os dados salvos no localStorage
    const nomeSalvo = localStorage.getItem("nome") || "Usuário";
    const cargoSalvo = localStorage.getItem("cargo") || "Cargo não definido";
    const perfilSalvo = localStorage.getItem("perfil") || "";

    setNome(nomeSalvo);
    setCargo(cargoSalvo);
    setPerfil(perfilSalvo);

    return () => document.body.classList.remove("skills-body");
  }, []);

  const addHardSkill = () => {
    if (hardInput.trim() === "") return;
    setHardSkills((prev) => [...prev, hardInput.trim()]);
    setHardInput("");
  };

  const addSoftSkill = () => {
    if (softInput.trim() === "") return;
    setSoftSkills((prev) => [...prev, softInput.trim()]);
    setSoftInput("");
  };

  const handleKeyDown = (e, type) => {
    if (e.key === "Enter") {
      e.preventDefault();
      type === "hard" ? addHardSkill() : addSoftSkill();
    }
  };

  const removeHardSkill = (index) => {
    setHardSkills((prev) => prev.filter((_, i) => i !== index));
  };

  const removeSoftSkill = (index) => {
    setSoftSkills((prev) => prev.filter((_, i) => i !== index));
  };

  return (
    <div className="containerSkills">
      {/* ===== Coluna Esquerda ===== */}
      <section className="column left">
        <div className="linha"></div>

        <header className="user-header">
          <div
            className="avatar"
            style={{
              backgroundImage: perfil ? `url(${perfil})` : "none",
              backgroundSize: "cover",
              backgroundPosition: "center",
            }}
          ></div>

          <div className="user-info">
            <p className="user-name">{nome}</p>
            <p className="user-meta">{cargo}</p>
          </div>
        </header>

        {/* Hard Skills */}
        <div className="skills-section">
          <h2 className="title">Hard Skills</h2>
          <p className="subtitle">Habilidades Técnicas</p>

          <div className="input-row">
            <input
              type="text"
              placeholder="Adicionar habilidade..."
              value={hardInput}
              onChange={(e) => setHardInput(e.target.value)}
              onKeyDown={(e) => handleKeyDown(e, "hard")}
            />
            <button type="button" onClick={addHardSkill}>
              ↩
            </button>
          </div>

          <div className="tags">
            {hardSkills.length === 0 ? (
              <p className="placeholder">Nenhuma habilidade adicionada ainda.</p>
            ) : (
              hardSkills.map((skill, index) => (
                <span key={index} className="tag">
                  {skill}
                  <button
                    className="remove-btn"
                    onClick={() => removeHardSkill(index)}
                  >
                    ×
                  </button>
                </span>
              ))
            )}
          </div>
        </div>

        <Link to="/" title="Conexão">
          <button className="btn back">VOLTAR</button>
        </Link>
      </section>

      {/* ===== Coluna Direita ===== */}
      <section className="column right">
        <div className="logo">GrowUs</div>
        <div className="image_logo">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="105"
            height="91"
            viewBox="0 0 105 91"
            fill="none"
          >
              <path d="M103.675 0.501114C103.705 0.530493 103.753 0.585284 103.814 0.682435C103.92 0.850484 104.022 1.08186 104.103 1.34188C104.184 1.60039 104.238 1.87007 104.256 2.11008C104.275 2.36052 104.251 2.53421 104.216 2.6254C104.053 3.04755 103.912 3.82271 103.884 4.37828C103.838 5.30004 103.737 5.9982 102.768 12.0649C101.971 17.052 101.803 18.0556 101.45 19.9247C101.229 21.1003 101.092 22.1423 101.05 22.9426C101.028 23.3415 101.03 23.694 101.06 23.9778C101.074 24.1195 101.097 24.2554 101.132 24.3766C101.158 24.463 101.194 24.5619 101.253 24.6546C101.25 24.6826 101.243 24.7238 101.228 24.7789C101.182 24.9421 101.087 25.1596 100.947 25.3823C100.764 25.6712 100.615 25.9931 100.518 26.2851C100.47 26.4313 100.432 26.579 100.412 26.7176C100.393 26.8478 100.383 27.0076 100.421 27.1599L100.416 27.1388C100.417 27.1415 100.418 27.1562 100.417 27.1875C100.416 27.2375 100.411 27.3079 100.402 27.3993C100.383 27.5813 100.348 27.8236 100.298 28.1114C100.198 28.686 100.042 29.4196 99.8568 30.1704C99.5183 31.5385 99.2383 32.5113 98.9331 33.1429C98.624 33.7823 98.3806 33.8923 98.1882 33.8987C98.0537 33.9031 97.8566 33.8631 97.5716 33.7242C97.2889 33.5864 96.9507 33.3668 96.5427 33.0527C95.7253 32.4235 94.6875 31.4629 93.3293 30.1553C92.2269 29.0941 91.1688 28.1278 90.3502 27.4258C89.9418 27.0755 89.5874 26.7869 89.3151 26.5835C89.1801 26.4827 89.057 26.3964 88.9525 26.3336C88.9009 26.3025 88.844 26.271 88.7865 26.2461C88.7562 26.233 88.6878 26.2043 88.5994 26.1917L88.5045 26.1857C88.4025 26.1877 88.3166 26.2148 88.2677 26.2329C88.2122 26.2535 88.1599 26.2799 88.1134 26.3048C88.0202 26.3545 87.9172 26.4195 87.8117 26.4928C87.5988 26.6406 87.3351 26.8469 87.0406 27.0917C86.4493 27.5832 85.706 28.2546 84.952 28.9892C82.2859 31.5866 80.8151 32.9819 76.3224 37.1721C75.0703 38.34 73.6167 39.8758 73.0952 40.5978C72.8629 40.9195 72.6288 41.1945 72.4439 41.3767C72.3745 41.445 72.3183 41.4914 72.279 41.5221C72.2064 41.5291 72.1497 41.5469 72.1216 41.5558C72.0415 41.5814 71.9648 41.6183 71.8998 41.6534C71.7674 41.7249 71.6159 41.8259 71.4592 41.9411C71.1419 42.1743 70.7538 42.5017 70.367 42.8676C59.985 52.6927 59.9 52.7739 57.8117 54.8957L57.8108 54.8953C57.3744 55.3388 56.9259 55.78 56.5556 56.1325C56.3645 56.3146 56.2019 56.4668 56.0747 56.5816L55.8079 56.8092C55.5217 57.0195 54.5145 57.9117 53.5791 58.777C51.1251 61.0471 49.472 62.5819 48.4276 63.5616C47.9058 64.0509 47.5335 64.4037 47.2888 64.6412C47.1671 64.7593 47.074 64.8525 47.0082 64.9207C46.9758 64.9544 46.9451 64.9869 46.9202 65.0158C46.908 65.0299 46.8929 65.0487 46.8775 65.0694C46.8753 65.0725 46.8694 65.0798 46.8619 65.0909C46.8591 65.094 46.8562 65.0979 46.8523 65.1021C46.8263 65.1302 46.785 65.1733 46.7285 65.2304C46.6164 65.3436 46.4547 65.5028 46.2543 65.6971C45.8537 66.0854 45.3052 66.6074 44.7067 67.1688C36.1948 75.1521 33.7251 77.5166 31.5991 79.7167C30.0545 81.3152 28.9281 82.4252 28.3282 82.9498L28.1035 83.1389C27.3471 83.7401 25.0862 85.8568 23.1196 87.8007C22.627 88.2875 22.0566 88.7774 21.537 89.171C21.0011 89.577 20.5695 89.8418 20.345 89.9253L20.3447 89.9262C20.079 90.025 19.9192 90.0759 19.7492 90.0952C19.5835 90.1139 19.3755 90.1054 19.032 90.0321C18.3194 89.8799 17.1695 89.4836 14.8706 88.6763L10.6179 87.183L11.2468 85.588C11.8226 84.1264 12.3429 83.3304 13.235 82.4914C15.3014 80.5479 16.6578 79.2121 17.7426 78.0499C18.0102 77.7636 18.2906 77.4798 18.5258 77.2545C18.6435 77.1418 18.7476 77.0461 18.8312 76.973C18.873 76.9366 18.9078 76.9071 18.9352 76.8854C18.9644 76.8621 18.9778 76.8534 18.9778 76.8534C19.2347 76.6912 19.4753 76.4135 19.6733 76.1418C19.881 75.8565 20.0808 75.5225 20.2472 75.1951C20.4125 74.8697 20.5535 74.5326 20.6345 74.2414C20.6746 74.0974 20.7063 73.9447 20.7106 73.8009C20.7141 73.6869 20.7033 73.495 20.5853 73.3269C20.5852 73.3105 20.5856 73.2822 20.5942 73.2414C20.6126 73.1553 20.6544 73.0428 20.7245 72.9177L20.8045 72.7892C21.1626 72.2592 21.3421 71.4747 21.4154 70.6183C21.4903 69.7427 21.4596 68.7159 21.3398 67.6446C21.1004 65.5064 20.4997 63.1268 19.6152 61.3302C18.8723 59.8211 17.6964 58.1062 16.6146 56.8077C16.0744 56.1592 15.5449 55.5992 15.0926 55.2171C14.8686 55.0278 14.6444 54.8661 14.4339 54.762C14.2805 54.6862 14.0168 54.5804 13.7367 54.6501L13.6159 54.692C13.3771 54.7967 13.3189 55.0087 13.306 55.0717C13.2903 55.1487 13.2958 55.2132 13.2987 55.2421C13.3054 55.3072 13.3218 55.3706 13.3352 55.4158C13.3641 55.514 13.4113 55.6393 13.4683 55.7803C13.5845 56.0675 13.7635 56.4688 13.9894 56.9516C14.4424 57.9196 15.0945 59.2385 15.8368 60.6746C17.1367 63.1893 18.0216 65.1854 18.4928 66.6383C18.7291 67.3669 18.8534 67.9368 18.8817 68.3547C18.9059 68.7135 18.8528 68.8828 18.8161 68.9521C18.8128 68.9525 18.8095 68.9543 18.8056 68.9548C18.7322 68.963 18.6053 68.9597 18.4118 68.9238C18.0269 68.8524 17.4811 68.6745 16.7705 68.3755C15.356 67.7802 13.3814 66.7463 10.9043 65.2928C6.30004 62.5912 2.88463 57.914 1.58537 52.5058C1.27737 51.2238 0.961283 49.2955 0.751182 47.6086C0.646283 46.7664 0.568645 45.9917 0.53132 45.3953C0.512626 45.0965 0.505036 44.849 0.507782 44.6632C0.50916 44.5701 0.513352 44.4987 0.518857 44.4478C0.525272 44.3884 0.530616 44.3848 0.521119 44.4094C0.663024 44.0422 0.750604 43.3704 0.795289 42.6958C0.829929 42.1728 0.840889 41.6009 0.821368 41.0801L0.792014 40.5796L0.77816 40.3394C0.766588 39.8365 0.889104 39.7195 0.96334 39.6761C1.03806 39.6325 1.18651 39.5852 1.47146 39.5818C1.75254 39.5784 2.12088 39.6184 2.5993 39.7052C4.42208 40.0358 7.12859 40.9941 9.8392 42.2045C12.5457 43.413 15.2062 44.8502 16.9413 46.1133C23.097 50.5945 25.9712 57.1921 25.0262 64.6514C24.952 65.2375 24.8484 65.8643 24.7418 66.3997C24.6327 66.9478 24.5271 67.3641 24.4551 67.5506C24.233 68.1254 24.1113 68.6626 24.1252 69.1026C24.1384 69.5225 24.2934 70.028 24.8216 70.1936L24.8219 70.1927C24.9458 70.2316 25.0539 70.216 25.1035 70.2057C25.1599 70.1939 25.2066 70.1762 25.2371 70.163C25.2986 70.1363 25.3554 70.1016 25.4007 70.0727C25.4947 70.0125 25.6067 69.9294 25.7258 69.8348C25.9672 69.6431 26.2854 69.3682 26.6504 69.0415C27.383 68.3857 28.3274 67.4975 29.2669 66.5872C30.2066 65.6766 31.1465 64.7394 31.8693 63.9852C32.2302 63.6087 32.5411 63.2735 32.7717 63.0085C32.8866 62.8766 32.9859 62.7569 33.063 62.6554C33.128 62.5698 33.2144 62.4501 33.2599 62.3325C33.2423 62.3779 33.2347 62.3716 33.3071 62.2835C33.3638 62.2145 33.4455 62.1232 33.5483 62.0165C33.753 61.8039 34.0248 61.5453 34.3115 61.2946C35.3083 60.4233 35.7566 59.5678 36.7839 56.8962C37.432 55.2107 38.0419 53.1545 38.4661 51.3629C38.6782 50.4668 38.8458 49.63 38.9477 48.9338C39.0467 48.2565 39.0927 47.657 39.031 47.2674C39.009 47.1282 39.0068 46.9291 39.0268 46.7207C39.0471 46.5103 39.0862 46.3289 39.1283 46.2198C39.2529 45.8972 39.3139 45.4929 39.3359 45.0548C39.3582 44.6094 39.3418 44.0965 39.2947 43.5401C39.2005 42.4265 38.9796 41.1079 38.6725 39.7508C38.0606 37.0465 37.0903 34.1222 36.0447 32.3121C35.3993 31.1947 34.7582 30.2687 34.2393 29.6822C33.9883 29.3987 33.7311 29.1533 33.4894 29.0218C33.3759 28.9602 33.1825 28.8773 32.9558 28.9142C32.7047 28.9552 32.5435 29.1157 32.4579 29.2825L32.4251 29.3538L32.4011 29.4322C32.3825 29.5091 32.3799 29.5781 32.3793 29.6183C32.3785 29.6856 32.3841 29.7574 32.3914 29.8281C32.406 29.9705 32.4341 30.1439 32.4713 30.3332C32.5459 30.7141 32.6621 31.1951 32.7978 31.6965C33.0673 32.6918 33.4271 33.8195 33.7117 34.4415C33.8139 34.6648 34.0006 35.3056 34.233 36.2321C34.4602 37.1382 34.7196 38.2701 34.9698 39.4353C35.4726 41.7773 35.9293 44.2112 36.019 45.2213C36.1135 46.2864 36.0609 47.4696 35.9193 48.3914C35.8482 48.8544 35.7576 49.2308 35.6616 49.4861C35.6462 49.527 35.6291 49.5615 35.6154 49.592C35.5373 49.5552 35.4421 49.5087 35.3341 49.4485C35.0156 49.2709 34.6116 49.0126 34.2037 48.7173C33.3627 48.1084 31.6545 46.8739 30.4068 45.9744C23.3167 40.8642 19.8895 35.482 18.5653 27.4113C18.087 24.4953 18.1151 21.0702 18.6495 17.7828C18.7349 17.2564 18.8116 16.7194 18.865 16.2779C18.9162 15.8545 18.9515 15.4752 18.945 15.2914L18.9459 15.2917C18.9437 15.2287 18.9742 15.0141 19.0575 14.6727C19.1353 14.3539 19.2454 13.9771 19.3687 13.6237C19.6325 12.8681 20.0734 11.3531 20.3519 10.2483C20.5395 9.50509 20.6902 8.9873 20.8536 8.63339C21.0152 8.28345 21.1455 8.19126 21.2393 8.15759C21.3602 8.11438 21.5909 8.10498 22.0677 8.25482C22.5316 8.40068 23.1351 8.66442 23.9529 9.04627C27.4532 10.6806 29.5541 11.7837 30.8712 12.6673C31.4995 13.0887 32.5054 13.7413 33.1096 14.1201C34.3285 14.884 35.8991 16.2428 38.434 18.7507C42.9422 23.2113 45.4439 27.781 46.0744 32.5962C46.1844 33.4364 46.2631 34.2527 46.3012 34.889C46.3202 35.2078 46.3285 35.4759 46.3264 35.6762C46.3254 35.7767 46.3223 35.8538 46.3171 35.9086C46.314 35.9411 46.3109 35.9574 46.3101 35.9619L46.2683 36.0919C46.2255 36.2467 46.2036 36.4088 46.1989 36.5583C46.1934 36.7369 46.2128 36.9458 46.2838 37.1289C46.2829 37.1249 46.2851 37.1304 46.2873 37.1496C46.2907 37.1793 46.2927 37.2259 46.2935 37.2906C46.2951 37.4193 46.2886 37.594 46.2725 37.8051C46.2483 38.1208 46.2052 38.5024 46.1453 38.9055L46.0797 39.3135C45.9832 39.8802 45.8951 40.4522 45.8299 40.918C45.767 41.3683 45.7196 41.7562 45.7172 41.9296C45.7177 41.8968 45.7223 41.9056 45.6968 42.0041C45.6762 42.0838 45.644 42.1933 45.6008 42.331C45.5146 42.6059 45.3884 42.9774 45.2316 43.4192C44.9184 44.3017 44.4861 45.4539 44.0111 46.6617L44.0107 46.6626C43.5323 47.8793 43.094 49.0556 42.7721 49.971C42.6113 50.428 42.4787 50.8235 42.3845 51.1282C42.3376 51.2802 42.2985 51.4139 42.2706 51.5232C42.246 51.6195 42.2189 51.7352 42.2142 51.8315C42.2082 51.9544 42.203 52.1482 42.27 52.3151C42.3097 52.4141 42.3884 52.5385 42.5385 52.619C42.6876 52.6989 42.8398 52.6991 42.9494 52.6814C43.1384 52.6508 43.3201 52.5466 43.4573 52.4605C43.6137 52.3623 43.8036 52.2269 44.0254 52.0622L44.0248 52.0609C44.636 51.6067 45.739 50.5382 46.4958 49.6773C47.2289 48.8437 48.4878 47.563 49.2826 46.8418C50.6144 45.6339 52.8259 43.5574 54.7117 41.7612C55.6547 40.863 56.5184 40.0334 57.1513 39.4155C57.4675 39.1067 57.7277 38.8485 57.9124 38.661C58.0042 38.5678 58.0804 38.4889 58.1362 38.4283C58.1636 38.3986 58.191 38.3691 58.2134 38.3421C58.2244 38.3288 58.2379 38.3108 58.2519 38.2912C58.2545 38.2875 58.2611 38.2766 58.2707 38.2614C58.2883 38.2413 58.319 38.2097 58.3613 38.1652C58.4448 38.0773 58.5655 37.9545 58.7161 37.8046C59.0169 37.5049 59.4281 37.1059 59.8752 36.6803C63.8205 32.9251 64.6014 32.1412 65.1197 31.3415L65.1209 31.3409C65.2426 31.1531 65.369 31.0003 65.4663 30.9071C65.4807 30.8933 65.4939 30.8814 65.5051 30.8717C65.5299 30.8682 65.5509 30.8677 65.5655 30.8642C65.6281 30.8491 65.681 30.8265 65.7176 30.8091C65.7917 30.7739 65.8654 30.7276 65.9305 30.6829C66.0647 30.5908 66.2274 30.4606 66.4042 30.3096C66.7608 30.0048 67.2124 29.5802 67.676 29.1078C68.5826 28.1838 70.1466 26.6557 71.1462 25.7161C72.9164 24.0525 74.5523 22.4651 75.7656 21.2451C76.3716 20.6358 76.8754 20.1153 77.2384 19.7207C77.4194 19.524 77.5699 19.3539 77.6816 19.2179C77.7372 19.1501 77.7875 19.0853 77.8284 19.0273C77.8627 18.9788 77.9147 18.9016 77.9477 18.8162C78.0891 18.4498 77.9162 18.1098 77.7456 17.8721C77.5588 17.612 77.2585 17.3132 76.8514 16.9628C76.0309 16.2566 74.672 15.2538 72.6079 13.8029C70.8045 12.5355 69.8002 11.7604 69.2592 11.1503C68.9967 10.8543 68.8632 10.6174 68.7967 10.404C68.7473 10.2457 68.7281 10.0806 68.7368 9.88505L68.755 9.6782L68.7868 9.46869C68.7979 9.4121 68.8098 9.36783 68.8214 9.33316C68.843 9.26883 68.856 9.26355 68.8456 9.27335C68.8337 9.28435 68.8346 9.27517 68.8877 9.26174C68.9485 9.2464 69.0462 9.23333 69.2082 9.22807C69.3754 9.22268 69.6497 9.17639 69.961 9.11484C70.2878 9.05022 70.6998 8.95949 71.1668 8.84974C72.1015 8.63007 73.2698 8.33142 74.4481 8.00675C76.79 7.36141 80.2499 6.45359 82.1332 5.98974C83.5515 5.64039 85.2069 5.2067 86.3418 4.89031L87.2754 4.62052C88.1844 4.3413 92.2111 3.26568 96.2317 2.22863C98.2359 1.71169 100.102 1.25762 101.493 0.942308C102.188 0.784508 102.761 0.662186 103.171 0.584502C103.377 0.545539 103.535 0.518769 103.645 0.504278C103.655 0.502858 103.666 0.502231 103.675 0.501114ZM46.8033 65.2019L46.8401 65.1258C46.8409 65.1243 46.8419 65.1229 46.8427 65.1215C46.8299 65.1433 46.8154 65.1707 46.8033 65.2019ZM65.3254 30.8713C65.301 30.8678 65.2748 30.8626 65.2476 30.8535C65.2741 30.8623 65.3004 30.8669 65.3254 30.8713Z"
              fill="#A100FF"
              stroke="#180D59"
            />
          </svg>
        </div>

        {/* Soft Skills */}
        <div className="skills-section">
          <h2 className="title">Soft Skills</h2>
          <p className="subtitle">Habilidades Comportamentais</p>

          <div className="input-row">
            <input
              type="text"
              placeholder="Adicionar habilidade..."
              value={softInput}
              onChange={(e) => setSoftInput(e.target.value)}
              onKeyDown={(e) => handleKeyDown(e, "soft")}
            />
            <button type="button" onClick={addSoftSkill}>
              ↩
            </button>
          </div>

          <div className="tags">
            {softSkills.length === 0 ? (
              <p className="placeholder">Nenhuma habilidade adicionada ainda.</p>
            ) : (
              softSkills.map((skill, index) => (
                <span key={index} className="tag">
                  {skill}
                  <button
                    className="remove-btn"
                    onClick={() => removeSoftSkill(index)}
                  >
                    ×
                  </button>
                </span>
              ))
            )}
          </div>
        </div>

        <button className="btn confirm">CONFIRMAR</button>
      </section>
    </div>
  );
}
